<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lanou.dao.DetailsMapper">

    <resultMap id="findGoodsNamePriceImgResult" type="Goods">
        <id column="gId" property="gId" javaType="int"/>
        <result column="gName" property="gName" jdbcType="VARCHAR"/>
        <result column="gImg" property="url" jdbcType="VARCHAR"/>
        <result column="gPrice" property="price" javaType="double"/>
        <result column="gMaketPrice" property="gMaketPrice" javaType="double"></result>
        <result column="gStock" property="gStock" jdbcType="INTEGER"></result>
        <result column="gJiFen" property="gJiFen" jdbcType="INTEGER" ></result>
    </resultMap>

    <select id="findGoodsNamePriceImg" parameterType="integer" resultMap="findGoodsNamePriceImgResult">
        SELECT * FROM 7jia2_goods WHERE gId = #{gId}
    </select>


    <resultMap id="findColorResult" type="Color">
        <id column="colorId" property="colorId" javaType="Integer" ></id>
        <result column="colorName" property="colorName" jdbcType="VARCHAR"></result>
    </resultMap>
    <select id="findColor" parameterType="Integer" resultMap="findColorResult">
        SELECT * FROM 7jia2_color WHERE colorId In (SELECT color_id FROM 7jia2_color_guige where goods_id = #{gId})
    </select>

    <resultMap id="findGuiGeResult" type="GuiGe">
        <id column="guigeId" property="guigeId" javaType="Integer" ></id>
        <result column="guigeName" property="guigeName" jdbcType="VARCHAR"></result>
    </resultMap>
    <select id="findGuiGe" parameterType="Integer" resultMap="findGuiGeResult">
        SELECT * FROM 7jia2_guige WHERE guigeId In (SELECT guigeId FROM 7jia2_color_guige where goods_id = #{gId})
    </select>


    <select id="findGuiGeByColor" parameterType="Integer" resultMap="findGuiGeResult">
        SELECT * FROM 7jia2_guige WHERE guigeId in (SELECT guige_Id FROM 7jia2_color_guige WHERE color_id=#{color_id})
    </select>

    <select id="findColorByGuiGe" parameterType="Integer" resultMap="findColorResult">
        SELECT * FROM 7jia2_color WHERE colorId in (SELECT color_id FROM 7jia2_color_guige WHERE guige_id=#{guige_id})
    </select>

    <!--????Id?????-->
    <select id="findColorBycId" parameterType="int" resultType="String">
        select colorName from 7jia2_color where colorId = #{cId}
    </select>

    <!--????Id?????-->
    <select id="findGuigeBygId" parameterType="int" resultType="String">
        select guigeName from 7jia2_guigeName where guigeName = #{gId}
    </select>
</mapper>
